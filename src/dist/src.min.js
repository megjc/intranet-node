function closeBtn(){function e(e,t,i,n){function o(e){var i=t.parent(),n=i[0].className;-1!=n.indexOf("modal")?i.removeClass("is-active"):i.addClass("hide")}t.bind("click",o)}var t={link:e,restrict:"A"};return t}function hdAutoComplete(e,t){function i(i,n,o,s){function c(e){i.query=e.name,i.show=!i.show,t.$broadcast("selected",i.query)}function r(){n[0].querySelector("results"),n.find("input");i.query.length>4?e.get("/api/users/search?q="+i.query).then(function(e){e.data.length>0&&(i.show=!i.show,i.results=e.data)})["catch"](function(e){console.log(e)}):(i.show=!1,i.results=[],t.$broadcast("unselected",{}))}n.bind("keyup",r);var a=n.find("input");a.on("blur",function(){console.log("exit")}),i.select=c,i.$on("submitted",function(e,t){i.query=""})}function n(){return'<div class="field autocomplete"><p class="control"><label class="label">My name is:</label><input class="input" type="text" placeholder="e.g. john brown" ng-model="query"><div class="results" ng-show="show"><p ng-repeat="result in results" ng-click="select(result)">{{result.name}}</p></div>'}var o={restrict:"E",link:i,scope:{data:"="},template:n()};return o}!function(){"use strict";function e(e,t){t.interceptors.push("interceptor"),t.interceptors.push("tokenInterceptor"),e.otherwise({redirectTo:"/users/login"})}function t(e){e.$on("$routeChangeSuccess",function(t,i,n){e.title=i.title})}function i(e,t,i){e.$on("$routeChangeStart",function(e,t,n){null!=t.access&&t.access.restricted&&i.validateToken().then(function(e){401==e.status&&i.handleUnAuthorized()})})}function n(e,t){var i=function(){return t.path()};e.$watch(i,function(t,i){var n=t.split("/");n.length>0&&(e.activetab=n[6])})}e.$inject=["$routeProvider","$httpProvider"],t.$inject=["$rootScope"],i.$inject=["$rootScope","$location","login"],n.$inject=["$rootScope","$location"],angular.module("intranet",["ngRoute","ngMessages","apps.help","apps.cea","core.admin","core.services","core.interceptors","core.filters","core.login","core.nav","core.search","core.dashboard","apps.pmas","apps.tod"]).config(e).run(t).run(i).run(n)}(),function(){"use strict";function e(e){e.when("/admin",{controller:"Admin",controllerAs:"vm",templateUrl:"views/core/admin/index.html",title:"Administration",access:{restricted:!0}}).when("/admin/users/ldap",{controller:"LDAPUser",controllerAs:"vm",templateUrl:"views/core/admin/ldap-users.html",title:"Administration",resolve:{ldap_users:["admin",function(e){return e.getLDAPUsers()}]},access:{restricted:!0}}).when("/admin/users",{controller:"User",controllerAs:"vm",templateUrl:"views/core/admin/users.html",title:"Administration",resolve:{users:["admin",function(e){return e.getUsers()}]},access:{restricted:!0}}).when("/admin/users/ldap/:dn",{controller:"Profile",controllerAs:"vm",templateUrl:"views/core/admin/profile.html",title:"Administration",resolve:{users:["admin",function(e){return e.getUsers()}]},access:{restricted:!0}})}function t(e,t,i){e.$on("$routeChangeStart",function(e,n,o){var s=t.path();-1!=s.indexOf("admin")&&i.isAdmin().then(function(e){401==e.status&&t.url("/dashboard/apps")})})}e.$inject=["$routeProvider"],t.$inject=["$rootScope","$location","login"],angular.module("core.admin",[]).config(e).run(t)}(),function(){"use strict";function e(e){e.when("/users/login",{templateUrl:"views/login/form.html",controller:"Login as vm",title:"Login ",access:{restricted:!1}}).otherwise({redirectTo:"/users/login"})}e.$inject=["$routeProvider"],angular.module("core.login",[]).config(e)}(),function(){"use strict";function e(e){e.when("/dashboard/apps/cea/contract-employees",{controller:"Employee as vm",title:"Contract Employee Administration",templateUrl:"views/apps/cea/employee-list.html",access:{restricted:!0},resolve:{create:["permission",function(e){return e.getByType("create")}],read:["permission",function(e){return e.getByType("read")}],update:["permission",function(e){return e.getByType("update")}],employees:["employeeSrv",function(e){return e.list()}]}}).when("/dashboard/apps/cea/new/employee",{controller:"CreateEmployee as vm",title:"New Employee",templateUrl:"views/apps/cea/create-employee.html",access:{restricted:!0},resolve:{activities:["common",function(e){return e.getActivities()}],classifications:["common",function(e){return e.getClassifications()}]}}).when("/dashboard/apps/cea/contract-employees/:id/edit",{controller:"EditEmployee as vm",title:"Edit Employee",templateUrl:"views/apps/cea/edit-employee.html",access:{restricted:!0},resolve:{activities:["common",function(e){return e.getActivities()}],classifications:["common",function(e){return e.getClassifications()}]}})}e.$inject=["$routeProvider"],angular.module("apps.cea",[]).config(e)}(),function(){"use strict";function e(e){e.when("/dashboard/apps",{controller:"Dashboard as vm",templateUrl:"views/dashboard/app-list.html",title:"Dashboard",resolve:{apps:["dashSrv",function(e){return e.getUserAppList()}]},access:{restricted:!0}})}e.$inject=["$routeProvider"],angular.module("core.dashboard",[]).config(e)}(),function(){"use strict";function e(e){e.when("/help-desk",{controller:"Help as vm",templateUrl:"templates/help-desk/form.html",title:"My Help Desk"})}e.$inject=["$routeProvider"],angular.module("apps.help",[]).config(e)}(),function(){"use strict";angular.module("core.nav",[])}(),function(){"use strict";function e(e){e.when("/dashboard/apps/pmas/plans",{controller:"Plan as vm",title:"PMAS Workplans",templateUrl:"views/apps/pmas/plan-list.html",access:{restricted:!0}}).when("/dashboard/apps/pmas/plans/:id/work-plan",{controller:"ViewPlan as vm",title:"View Workplan",templateUrl:"views/apps/pmas/plan-view.html",access:{restricted:!0}}).when("/dashboard/apps/pmas/plans/:id/resource-needs",{controller:"Resource as vm",title:"View Workplan",templateUrl:"views/apps/pmas/plan-resource.html",access:{restricted:!0}}).when("/dashboard/apps/pmas/plans/:id/work-plan-changes",{controller:"WorkPlanChanges as vm",title:"Workplan Changes",templateUrl:"views/apps/pmas/plan-changes.html",access:{restricted:!0}}).when("/dashboard/apps/pmas/plans/:id/notifications",{controller:"Notification as vm",title:"Workplan Notifications",templateUrl:"views/apps/pmas/plan-notifications.html",access:{restricted:!0}})}e.$inject=["$routeProvider"],angular.module("apps.pmas",[]).config(e)}(),function(){"use strict";function e(e){e.when("/dashboard/apps/search",{templateUrl:"views/search/searchResults.html",controller:"Search as vm",title:"Search ",access:{restricted:!0}})}e.$inject=["$routeProvider"],angular.module("core.search",[]).config(e)}(),function(){"use strict";function e(e){e.when("/dashboard/apps/tod/expired-docs",{templateUrl:"views/apps/tod/expires-list.html",controller:"ExpiryList as vm",title:"Expired Documents",resolve:{officers:["todSrv",function(e){return e.getExpiredDocs()}],create:["permission",function(e){return e.getByType("create")}],read:["permission",function(e){return e.getByType("read")}],update:["permission",function(e){return e.getByType("update")}]},access:{restricted:!0}}).when("/dashboard/apps/tod/notifications",{templateUrl:"views/apps/tod/notification-list.html",controller:"NotificationList as vm",title:"Notifications",resolve:{notifications:["todSrv",function(e){return e.getNotifications()}],create:["permission",function(e){return e.getByType("create")}],read:["permission",function(e){return e.getByType("read")}],update:["permission",function(e){return e.getByType("update")}]},access:{restricted:!0}}).when("/dashboard/apps/tod/officers",{templateUrl:"views/apps/tod/officer-listing.html",controller:"OfficerList as vm",title:"Officer Listing",resolve:{officers:["todSrv",function(e){return e.getOfficers()}],create:["permission",function(e){return e.getByType("create")}],read:["permission",function(e){return e.getByType("read")}],update:["permission",function(e){return e.getByType("update")}]},access:{restricted:!0}}).when("/dashboard/apps/tod/officers/new",{templateUrl:"views/apps/tod/create-officer.html",controller:"Officer as vm",title:"Add New Officer",resolve:{allowances:["todSrv",function(e){return e.getAllowances()}],classifications:["todSrv",function(e){return e.getClassifications()}],activities:["todSrv",function(e){return e.getActivities()}]},access:{restricted:!0}}).when("/dashboard/apps/tod/officers/:id/edit",{templateUrl:"views/apps/tod/edit-officer.html",controller:"EditOfficer as vm",title:"Edit Officer",access:{restricted:!0},resolve:{allowances:["todSrv",function(e){return e.getAllowances()}],classifications:["todSrv",function(e){return e.getClassifications()}],activities:["todSrv",function(e){return e.getActivities()}]}}).otherwise({redirectTo:"/login"})}e.$inject=["$routeProvider"],angular.module("apps.tod",[]).config(e)}(),function(){"use strict";function e(){function e(){console.log("Admin")}e()}angular.module("core.admin").controller("Admin",e)}(),function(){"use strict";function e(e,t){function i(){o.users=t}function n(t){e.path("/admin/users/ldap/"+t)}var o=this;o.view=n,i()}angular.module("core.admin").controller("LDAPUser",e),e.$inject=["$location","ldap_users"]}(),function(){"use strict";function e(e,t,i,n){function o(){r.access=i.appList(),r.user=i.extractNameFromDN(t.dn),r.department=i.extractDepartmentFromDN(t.dn),i.getApps(t.dn).then(function(e){r.apps=e.data})}function s(){r.show=!r.show}function c(){var e=0;if(angular.forEach(r.access,function(t,i){1==t&&(e++,r.accessList.push(i))}),e>0){var c={uname:r.user,dn:t.dn};i.addUser(c).then(function(e){for(var t=e.data.id,c={uid:t},a=0;a<r.accessList.length;a++)c.app_name=r.accessList[a],i.grantAccess(c).then(function(e){s(),r.message=e.data,n.emitEvent("notification"),o()})})}}var r=this;r.toggle=s,r.show=!1,r.save=c,r.accessList=[],r.message={},o(),n.subscribe(e,"notification",function(){r.notification={text:r.message.message,success:r.message.success,show:!0}})}angular.module("core.admin").controller("Profile",e),e.$inject=["$scope","$routeParams","admin","notify"]}(),function(){"use strict";function e(e){function t(){i.users=e}var i=this;t()}angular.module("core.admin").controller("User",e),e.$inject=["users"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/users/ldap").then(function(e){return e.data})}function i(){return e.get("/api/users").then(function(e){return e.data})}function n(t){return e.get("/api/apps/"+t)}function o(e){var t=e.split(","),i=t[0],n=i.split("=");return n[1]}function s(e){var t=e.split(","),i=t[1].split("=");return i[1].toUpperCase()}function c(t){return e.post("/api/apps/grant_access",t)}function r(){return{"traveling officer database":!1}}function a(t){return e.post("/api/users",t)}var u={getLDAPUsers:t,getUsers:i,getApps:n,extractNameFromDN:o,extractDepartmentFromDN:s,grantAccess:c,appList:r,addUser:a};return u}angular.module("core.admin").service("admin",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,i,n,o,s,c){function r(){u(o),0!=s.getToken()&&s.validateToken().then(function(t){t.data?e.path("/dashboard/apps"):e.path("/users/login")})}function a(){var t="/dashboard/apps";s.authUser(l.credentials).then(function(i){l.message=i.data,c.emitEvent("notification"),s.setToken(i.data.token),i.data.success&&n(function(){void 0!==o.redirectTo&&(t=decodeURI(o.redirectTo)),e.search(""),e.path(t)},500)})["catch"](function(e,t,n,o){delete i.sessionStorage.uid})}function u(e){var t,i="",n=!1,o={session_expired:{message:"Your session has expired. Please enter your username and password.",success:!1},logout:{message:"Logout successful.",success:!0}};for(var s in o)e.hasOwnProperty(s)&&(i=o[s].message,t=o[s].success,n=!0);n&&(l.notification=c.builder(i,t,!0),c.emitEvent("notification"))}var l=this;l.credentials=s.initUser(),l.auth=a,r(),c.subscribe(t,"notification",function(){l.notification=c.builder(l.message.message,l.message.success,!0)})}angular.module("core.login").controller("Login",e),e.$inject=["$location","$scope","$window","$timeout","$routeParams","login","notify"]}(),function(){"use strict";function e(e,t,i){function n(){var e=encodeURI(t.path());sessionStorage.removeItem("uid"),t.url("/users/login?session_expired=true&redirectTo="+e)}function o(t){return e.post("/api/users/auth/ldap",t)}function s(){return{name:"",password:""}}function c(){var e=i.sessionStorage.token;return null==e||0==e.length?!1:e}function r(e){null==e&&0==e.length||(i.sessionStorage.uid=e)}function a(){var t={method:"GET",url:"/api/token/verify",headers:{Authorization:"Bearer "+i.sessionStorage.uid}};return e(t)}function u(){delete i.sessionStorage.uid}function l(){return e.get("/api/users/me")}function f(){return e.get("/api/users/admin")}var d={authUser:o,initUser:s,getToken:c,setToken:r,validateToken:a,deleteToken:u,getUname:l,isAdmin:f,handleUnAuthorized:n};return d}angular.module("core.login").service("login",e),e.$inject=["$http","$location","$window"]}(),function(){"use strict";function e(e,t,i,n,o,s){function c(){l.classifications=o,l.activities=s}function r(e){e.$setPristine(),t.create(l.officer).then(function(n){l.message=n,c(),i.emitEvent("notification"),n.success&&(e.$setPristine(),l.officer=t.initOfficer(),l.selectedClassification="",l.selectedActivity="")})}function a(){l.officer.activity_id=l.selectedActivity}function u(){l.officer.classification_id=l.selectedClassification}var l=this;l.save=r,l.officer=t.initOfficer(),l.getSelectedClassificiation=u,l.getSelectedActivity=a,c(),i.subscribe(e,"notification",function(){l.notification={success:l.message.success,text:l.message.text,show:!0}})}angular.module("apps.cea").controller("CreateEmployee",e),e.$inject=["$scope","employeeSrv","notify","common","classifications","activities"]}(),function(){"use strict";function e(e,t,i,n,o,s,c){function r(){i.getEmployeeById(t.id).then(function(e){f.officer=e,f.activities=c,f.classifications=s,f.officer.start_date=new Date(e.start_date),f.officer.end_date=new Date(e.end_date);var t=n.findinList("id",e.classification_id,s),i=n.findinList("id",e.activity_id,c);f.selectedActivity=i.id,f.selectedClassification=t.id})}function a(){f.officer.classification_id=f.selectedClassification}function u(){f.officer.activity_id=f.selectedActivity}function l(){i.update(f.officer).then(function(e){f.message=e,r(),o.emitEvent("notification")})}var f=this;r(),f.save=l,f.getSelectedClassification=a,f.getSelectedActivity=u,o.subscribe(e,"notification",function(){f.notification={success:f.message.success,text:f.message.text,show:!0}})}angular.module("apps.cea").controller("EditEmployee",e),e.$inject=["$scope","$routeParams","employeeSrv","common","notify","classifications","activities"]}(),function(){"use strict";function e(e,t,i,n,o,s){function c(){}var r=this;c(),r.canCreate=e,r.canRead=t,r.canUpdate=i,r.employees=n}angular.module("apps.cea").controller("Employee",e),e.$inject=["create","read","update","employees","permission","employeeSrv"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/employees?type=contract").then(function(e){return e.data})}function i(t){return e.get("/api/employees/"+t).then(function(e){return e.data})}function n(t){return e.put("/api/contract-employees/"+t.id,t).then(function(e){return e.data})}function o(t){return t.emp_type="C",t.is_traveling="F",t.allowance_type=0,e.post("/api/contract-employees",t).then(function(e){return e.data})}function s(){return{name:"",email:"",classification_id:"",position:"",activity_id:"",start_date:new Date,end_date:""}}var c={list:t,getEmployeeById:i,update:n,create:o,initOfficer:s};return c}angular.module("apps.cea").service("employeeSrv",e),e.$inject=["$http"]}(),angular.module("core.directives",[]).directive("closeBtn",closeBtn),function(){"use strict";function e(){return function(e){return e.charAt(0).toUpperCase()}}function t(){return function(e,t,i){return e===t?i:e}}angular.module("core.filters",[]).filter("charAt",e).filter("replaceWith",t)}(),function(){"use strict";angular.module("core.interceptors",[])}(),function(){"use strict";function e(){function e(e){return e.status>=400?e:void 0}var t={responseError:e};return t}angular.module("core.interceptors").factory("interceptor",e)}(),function(){"use strict";function e(e,t){function i(e){var i=t.path();return-1==i.indexOf("login")&&(e.headers.Authorization="Bearer "+sessionStorage.getItem("uid")),e}function n(t){return e.reject(t)}var o={request:i,responseError:n};return o}angular.module("core.interceptors").factory("tokenInterceptor",e),e.$inject=["$q","$location"]}(),function(){"use strict";angular.module("core.services",[])}(),function(){"use strict";function e(e){function t(){return e.get("/api/classifications").then(function(e){return e.data})}function i(){return e.get("/api/activities").then(function(e){return e.data})}function n(e,t,i){for(var n=0,o=!1;n<i.length;n++)if(i[n].hasOwnProperty(e)&&(o=i[n],o[e]==t))return o}var o={getClassifications:t,getActivities:i,findinList:n};return o}e.$inject=["$http"],angular.module("core.services").service("common",e)}(),function(){"use strict";function e(e){function t(t,i,n){var o=e.$on(i,n);t.$on("$destroy",o)}function i(t){e.$emit(t)}function n(e,t,i){return{text:e,success:t,show:i}}var o={subscribe:t,emitEvent:i,builder:n};return o}angular.module("core.services").service("notify",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e){function t(t){var i=sessionStorage.getItem("_ai")||0;return e.get("/api/apps/"+i+" /permissions?type="+t).then(function(e){return e.data})}var i={getByType:t};return i}angular.module("core.services").service("permission",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(){n.apps=e}function i(e){sessionStorage.setItem("_ai",e)}var n=this;n.setAppId=i,t()}angular.module("core.dashboard").controller("Dashboard",e),e.$inject=["apps"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/apps").then(function(e){return e.data})}var i={getUserAppList:t};return i}angular.module("core.dashboard").service("dashSrv",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,i){function n(){r.ticket=i.initializeTicket(),r.ticket_types=i.getTicketTypes(),r.requests=i.getRequestTypes(r.ticket_types)}function o(){i.createTicket(r.ticket).then(function(e){r.message={success:e.data.success,text:e.data.text,show:!0},1==e.data.success&&(r.ticket=i.initializeTicket(),r.type="",t.ticketSubForm.$setUntouched())})["catch"](function(e){r.message=i.showError()}),e()}function s(){r.ticket=i.initializeTicket()}function c(e){r.ticket.type_id=e.id}var r=this;r.submit=o,r.cancel=s,r.select=c,n()}angular.module("apps.help").controller("Help",e),e.$inject=["$anchorScroll","$scope","helpService"]}(),angular.module("apps.help").directive("hdAutoComplete",hdAutoComplete),hdAutoComplete.$inject=["$http","$rootScope"],function(){"use strict";function e(e){function t(t){return e.post("/api/validate",{email:t})}function i(){return{description:"",type_id:"",email:""}}function n(e){}function o(){return[{id:1,title:"software issue"},{id:2,title:"general computer issue"},{id:4,title:"internet issue"},{id:5,title:"printer issue"},{id:6,title:"phone issue (CUG or desk phone)"},{id:7,title:"unknown issue"},{id:8,title:"setting up a new employee"},{id:9,title:"making a change to the Ministry's website"},{id:10,title:"setting up/configuring a closed user group cell phone"},{id:11,title:"creating a custom application for our division/branch"},{id:12,title:"setting up a projector/public announcement system"},{id:13,title:"providing support at an event/meeting"},{id:14,title:"other"}]}function s(e){return e.slice(6)}function c(e){return{success:!1,message:"Please review the form for errors"}}function r(t){return""==t.description&&(t.description="no description provided by user"),e.post("/api/tickets",t)}function a(){return{error:!0,text:"We are unable to submit your issue at this time.",show:!0}}var u={initializeTicket:i,isEmpty:n,getTicketTypes:o,getRequestTypes:s,showMessage:c,createTicket:r,showError:a,validate:t};return u}angular.module("apps.help").service("helpService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){function i(){t.getUname().then(function(e){o.username=e.data})}function n(){t.deleteToken(),e.url("/users/login?logout=true")}var o=this;o.logout=n,i()}angular.module("core.nav").controller("Nav",e),e.$inject=["$location","login"]}(),function(){"use strict";function e(e,t,i){function n(){c.plans=[{post:"Web Developer",appraiser:{name:"Nicholas Bailey",post:"Director"},division:"Information, Communication & Technology",classification:"MIT IT 5",period_start:2017,period_end:2018}]}function o(){c.message={success:!0,text:"Work plan successfully created.",show:!0},s(),t.emitEvent("notification")}function s(){c.active=!c.active}var c=this;c.save=o,c.toggle=s,c.active=!1,n(),t.subscribe(e,"notification",function(){c.notification={success:c.message.success,text:c.message.text,show:!0}})}angular.module("apps.pmas").controller("Plan",e),e.$inject=["$scope","notify","common"]}(),function(){"use strict";function e(e,t){function i(){var i=t.q||"";"undefined"==typeof i&&""==i||e.get("/api/search?app=1&q="+i).then(function(e){n.results=e.data})["catch"](function(e){n.resuls=[]})}var n=this;i()}angular.module("core.search").controller("Search",e),e.$inject=["$http","$routeParams"]}(),function(){"use strict";function e(e,t,i,n,o,s){function c(){d.allowances=e,d.classifications=t,d.activities=i}function r(e){s.createOfficer(d.officer).then(function(t){d.message=t,e.$setPristine(),t.success&&(d.officer=s.initOfficerForm(),d.selectedClassification="",d.selectedAllowance="",d.selectedActivity=""),o.emitEvent("notification")})}function a(){d.officer.classification_id=d.selectedClassification}function u(){switch(d.officer.allowance_type=d.selectedAllowance,d.selectedAllowance){case 1:case 3:case 5:case 7:case 11:case 13:case 15:case 17:case 19:d.toggleBox=!d.toggleBox,d.officer.vehicle_required=!0,d.vehicle_details_required=!0;break;default:d.toggleBox=!1}}function l(){d.officer.activity_id=d.selectedActivity}function f(){d.showPermissionDate=!d.showPermissionDate,d.officer.is_owner||(d.permissionRequired=!d.permissionRequired)}var d=this;d.save=r,d.officer=s.initOfficerForm(),d.getSelected=a,d.getSelectedActivity=l,d.getSelectedAllowance=u,d.toggle=f,d.showPermissionDate=!1,d.toggleBox=!1,d.vehicle_details_required=!1,d.permissionRequired=!1,c(),o.subscribe(n,"notification",function(){d.notification=o.builder(d.message.message,d.message.success,!0)})}angular.module("apps.tod").controller("Officer",e),e.$inject=["allowances","classifications","activities","$scope","notify","todSrv"]}(),function(){"use strict";function e(e,t,i,n,o,s,c,r){function a(){o.getOfficerById(i.id).then(function(e){A.officer=e,A.classifications=c,A.allowances=s,A.activities=r,A.addVehicle=u(e),A.selectedClassification=f("id",e.classification_id,c),A.selectedAllowance=f("id",e.allowance_type,s),A.selectedActivity=f("id",e.activity_id,r),A.isOfficer="T"==e.is_traveling,A.disabled="F"==e.is_traveling,e.docs.length>0&&(A.officer.license=new Date(e.docs[0].expiry_date),A.officer.fitness=new Date(e.docs[1].expiry_date),A.officer.registration=new Date(e.docs[2].expiry_date),A.officer.insurance=new Date(e.docs[3].expiry_date))})}function u(e){return null==e.vehicle_id}function l(){o.createVehicle(A.vehicle).then(function(e){A.message=e,A.toggleCreate(),a(),n.emitEvent("notification"),b()})}function f(e,t,i){for(var n=0,o=!1;n<i.length;n++)if(i[n].hasOwnProperty(e)&&(o=i[n],o[e]==t))return o}function d(e){o.update(A.officer,e,null,null).then(function(e){A.message=e,a(),n.emitEvent("notification"),b()})}function p(){o.compareString(A.confirm,A.officer.name)&&(d("remove-officer"),w())}function m(){A.officer.activity_id=A.selectedActivity.id}function g(){A.officer.allowance_type=A.selectedAllowance.id}function h(){A.officer.classification_id=A.selectedClassification.id}function v(){o.updateVehicle(A.officer).then(function(e){A.message=e,n.emitEvent("notification"),b()})}function y(e,t,i){var s={employee_id:i,expiry_date:t,id:e};o.updateDoc(s).then(function(e){A.message=e,n.emitEvent("notification"),b()})}function w(){A.active=!A.active}function $(){A.createActive=!A.createActive}function b(){e.scrollTo(0,0)}function _(e){A.vehicle.employee_id=e,$()}var A=this;A.update=d,a(),A.updateDoc=y,A.updateVehicle=v,A.getSelectedActivity=m,A.getSelectedAllowance=g,A.getSelectedClassification=h,A.toggle=w,A.removeOfficer=p,A.addVehicle=!1,A.createVehicle=_,A.toggleCreate=$,A.saveVehicle=l,A.createActive=!1,A.confirm="",A.active=!1,A.disabled=!1,A.vehicle={},n.subscribe(t,"notification",function(){A.notification={success:A.message.success,text:A.message.text,show:!0}})}angular.module("apps.tod").controller("EditOfficer",e),e.$inject=["$window","$scope","$routeParams","notify","todSrv","allowances","classifications","activities"]}(),function(){"use strict";function e(e,t,i,n,o,s,c,r){function a(){d.canCreate=n,d.canRead=o,d.canUpdate=s,d.officers=i}function u(e){d.docs=e.docs,l()}function l(){d.active=!d.active}function f(e){l(),c.sendNotification(e).then(function(e){d.message=e,r.emitEvent("notification")})}var d=this;d.notifyOfficer=u,d.sendNotification=f,d.active=!1,d.toggle=l,a(),r.subscribe(t,"notification",function(){d.notification=r.builder(d.message.text,d.message.success,!0)})}angular.module("apps.tod").controller("ExpiryList",e),e.$inject=["$location","$scope","officers","create","read","update","todSrv","notify"]}(),function(){"use strict";function e(e,t,i,n,o,s){function c(){r.canCreate=i,r.canRead=n,r.canUpdate=o,r.notifications=t}var r=this;c()}angular.module("apps.tod").controller("NotificationList",e),e.$inject=["$location","notifications","create","read","update","todSrv"]}(),function(){"use strict";function e(e,t,i,n,o,s){function c(){f.officers=s}function r(e){n.getDocsByOfficerId(e).then(function(t){a(e),d.push(e),f.documents=t.data})}function a(e){0!=d.length?(u(),document.getElementById(e).classList.toggle("show")):document.getElementById(e).classList.toggle("show")}function u(){for(var e,t=0;t<d.length;t++)e=document.getElementById(d[t]),e.classList.contains("show")&&e.classList.remove("show")}function l(){"undefined"!=typeof f.query&&o.url("/dashboard/apps/search?q="+f.query)}var f=this;f.showDocs=r,f.showModal=!1,f.query="",f.search=l;var d=[];f.canCreate=e,f.canRead=t,f.canUpdate=i,c(),window.onclick=function(e){e.target.matches(".src")||u()}}angular.module("apps.tod").controller("OfficerList",e),e.$inject=["create","read","update","todSrv","$location","officers"]}(),function(){"use strict";function e(e){function t(){var t=sessionStorage.getItem("_ai");return e.get("/api/notifications/"+t).then(function(e){return e.data})}function i(){return e.get("/api/employees").then(function(e){return e.data})}function n(t){return e.get("/api/employees/"+t+"/documents")}function o(){return!1}function s(t){return e.post("/api/employees?traveling=true",t).then(function(e){return e.data})}function c(t){return e.post("/api/vehicles",t).then(function(e){return e.data})}function r(){return e.get("/api/allowances").then(function(e){return e.data})}function a(){return e.get("/api/classifications").then(function(e){return e.data})}function u(){return{name:"",email:"",classification:"",allowance_type:"",position:"",activity_id:"",insurance:new Date,registration:new Date,license:new Date,fitness:new Date,permission_date:new Date,is_owner:!0,comment:"",vehicle_required:!1}}function l(){return e.get("/api/activities").then(function(e){return e.data})}function f(t){return e.get("/api/employees/"+t).then(function(e){return e.data})}function d(e){return{id:e.id,name:e.name,email:e.email,position:e.position,classification_id:e.classification_id,activity_id:e.activity_id,allowance_type:e.allowance_type,is_traveling:e.is_traveling}}function p(e){return{id:e.vehicle_id,plate:e.plate,make:e.make,model:e.model,year:e.vehicle_year}}function m(t,i,n,o){var s={},c="/api/employees/"+t.id;return"employee"==i?s=d(t):"remove-officer"==i&&(t.is_traveling="F",s=d(t)),e.put(c,s).then(function(e){return e.data})}function g(t){var i=p(t);return e.put("/api/vehicles/"+t.vehicle_id,i).then(function(e){return e.data})}function h(t){return e.put("/api/documents/"+t.id,t).then(function(e){return e.data})}function v(){return e.get("/api/expired").then(function(e){return e.data})}function y(t){return e.put("/api/employees/"+t,{is_traveling:"F"}).then(function(e){return e.data})}function w(e){var t=["remove-officer"];return t.indexOf(e)>-1}function $(e,t){return e.toLowerCase()==t.toLowerCase()}function b(t){var i=sessionStorage.getItem("_ai");return e.post("/api/notify/"+i,t).then(function(e){return e.data})}var _={getOfficers:i,getDocsByOfficerId:n,initModal:o,createOfficer:s,createVehicle:c,getAllowances:r,getClassifications:a,initOfficerForm:u,getActivities:l,getOfficerById:f,update:m,updateDoc:h,getExpiredDocs:v,updateVehicle:g,removeOfficer:y,checkSection:w,compareString:$,sendNotification:b,getNotifications:t};return _}angular.module("apps.tod").service("todSrv",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t,i){function n(){}function o(){c.active=!c.active}function s(){c.message={success:!0,text:"Work plan item successfully added.",show:!0},o(),t.emitEvent("notification")}var c=this;c.toggle=o,c.save=s,c.active=!1,n(),t.subscribe(e,"notification",function(){c.notification={success:c.message.success,text:c.message.text,show:!0}})}angular.module("apps.pmas").controller("WorkPlanChanges",e),e.$inject=["$scope","notify","common"]}(),function(){"use strict";function e(e,t,i){function n(){}function o(){c.show=!c.show}function s(){c.message={success:!0,text:"Work plan item successfully added.",show:!0},o(),t.emitEvent("notification")}var c=this;c.toggle=o,c.save=s,c.show=!1,c.active=!1,n(),t.subscribe(e,"notification",function(){c.notification={success:c.message.success,text:c.message.text,show:!0}})}angular.module("apps.pmas").controller("ViewPlan",e),e.$inject=["$scope","notify","common"]}(),function(){"use strict";function e(e,t,i){function n(){}function o(){c.active=!c.active}function s(){c.message={success:!0,text:"Work plan item successfully added.",show:!0},o(),t.emitEvent("notification")}var c=this;c.toggle=o,c.save=s,c.active=!1,n(),t.subscribe(e,"notification",function(){c.notification={success:c.message.success,text:c.message.text,show:!0}})}angular.module("apps.pmas").controller("Notification",e),e.$inject=["$scope","notify","common"]}(),function(){"use strict";function e(e,t,i){function n(){}function o(){c.active=!c.active}function s(){c.message={success:!0,text:"Work plan item successfully added.",show:!0},o(),t.emitEvent("notification")}var c=this;c.toggle=o,c.save=s,c.active=!1,n(),t.subscribe(e,"notification",function(){c.notification={success:c.message.success,text:c.message.text,show:!0}})}angular.module("apps.pmas").controller("Resource",e),e.$inject=["$scope","notify","common"]}();