function closeBtn(){function e(e,t,n,o){function i(e){var n=t.parent(),o=n[0].className;-1!=o.indexOf("modal")?n.removeClass("is-active"):n.addClass("hide")}t.bind("click",i)}var t={link:e,restrict:"A"};return t}function hdAutoComplete(e,t){function n(n,o,i,r){function s(e){n.query=e.name,n.show=!n.show,t.$broadcast("selected",n.query)}function c(){o[0].querySelector("results"),o.find("input");n.query.length>4?e.get("/api/users/search?q="+n.query).then(function(e){e.data.length>0&&(n.show=!n.show,n.results=e.data)})["catch"](function(e){console.log(e)}):(n.show=!1,n.results=[],t.$broadcast("unselected",{}))}o.bind("keyup",c);var u=o.find("input");u.on("blur",function(){console.log("exit")}),n.select=s,n.$on("submitted",function(e,t){n.query=""})}function o(){return'<div class="field autocomplete"><p class="control"><label class="label">My name is:</label><input class="input" type="text" placeholder="e.g. john brown" ng-model="query"><div class="results" ng-show="show"><p ng-repeat="result in results" ng-click="select(result)">{{result.name}}</p></div>'}var i={restrict:"E",link:n,scope:{data:"="},template:o()};return i}!function(){"use strict";function e(e,t){t.interceptors.push("interceptor"),t.interceptors.push("tokenInterceptor"),e.otherwise({redirectTo:"/users/login"})}function t(e){e.$on("$routeChangeSuccess",function(t,n,o){e.title=n.title})}function n(e,t,n){e.$on("$routeChangeStart",function(e,t,o){null!=t.access&&t.access.restricted&&n.validateToken().then(function(e){})})}e.$inject=["$routeProvider","$httpProvider"],t.$inject=["$rootScope"],n.$inject=["$rootScope","$location","login"],angular.module("intranet",["ngRoute","ngMessages","apps.help","core.filters","core.interceptors","core.interceptors.http","core.login","core.nav","core.search","core.dashboard","apps.tod"]).config(e).run(t).run(n)}(),function(){"use strict";function e(e){e.when("/users/login",{templateUrl:"views/login/form.html",controller:"Login as vm",title:"Login ",access:{restricted:!1}}).otherwise({redirectTo:"/users/login"})}e.$inject=["$routeProvider"],angular.module("core.login",[]).config(e)}(),function(){"use strict";function e(e){e.when("/help-desk",{controller:"Help as vm",templateUrl:"templates/help-desk/form.html",title:"My Help Desk"})}e.$inject=["$routeProvider"],angular.module("apps.help",[]).config(e)}(),function(){"use strict";function e(e){e.when("/dashboard/apps",{controller:"Dashboard as vm",templateUrl:"views/dashboard/app-list.html",title:"Dashboard",resolve:{apps:["dashSrv",function(e){return e.getUserAppList()}]},access:{restricted:!0}})}e.$inject=["$routeProvider"],angular.module("core.dashboard",[]).config(e)}(),function(){"use strict";angular.module("core.nav",[])}(),function(){"use strict";function e(e){e.when("/dashboard/apps/search",{templateUrl:"views/search/searchResults.html",controller:"Search as vm",title:"Search ",access:{restricted:!0}})}e.$inject=["$routeProvider"],angular.module("core.search",[]).config(e)}(),function(){"use strict";function e(e){e.when("/dashboard/apps/tod/expires",{templateUrl:"views/apps/tod/expires-list.html",controller:"ExpiryList as vm",title:"Expired Documents",resolve:{officers:["todSrv",function(e){return e.getOfficers()}]},access:{restricted:!0}}).when("/dashboard/apps/tod/officer-listing",{templateUrl:"views/apps/tod/officer-listing.html",controller:"OfficerList as vm",title:"Officer Listing",resolve:{officers:["todSrv",function(e){return e.getOfficers()}]},access:{restricted:!0}}).otherwise({redirectTo:"/login"})}e.$inject=["$routeProvider"],angular.module("apps.tod",[]).config(e)}(),function(){"use strict";function e(e,t,n,o,i){function r(){0!=i.getToken()&&i.validateToken().then(function(t){t.data?e.path("/dashboard/apps"):e.path("/users/login")})}function s(){i.authUser(c.credentials).then(function(t){c.message={success:t.data.success,show:!0,text:t.data.message},i.setToken(t.data.token),t.data.success&&o(function(){e.path("/dashboard/apps")},500)})["catch"](function(e,t,o,i){delete n.sessionStorage.uid})}var c=this;c.credentials=i.initUser(),c.auth=s,r()}angular.module("core.login").controller("Login",e),e.$inject=["$location","$scope","$window","$timeout","login"]}(),function(){"use strict";function e(e,t,n){function o(t){return e.post("/api/users/auth/ldap",t)}function i(){return{name:"",password:""}}function r(){var e=n.sessionStorage.token;return null==e||0==e.length?!1:e}function s(e){null==e&&0==e.length||(n.sessionStorage.uid=e)}function c(){var t={method:"GET",url:"/api/token/verify",headers:{Authorization:"Bearer "+n.sessionStorage.uid}};return e(t)}function u(){delete n.sessionStorage.uid}function a(){return e.get("/api/users/me")}var l={authUser:o,initUser:i,getToken:r,setToken:s,validateToken:c,deleteToken:u,getUname:a};return l}angular.module("core.login").service("login",e),e.$inject=["$http","$location","$window"]}(),angular.module("core.directives",[]).directive("closeBtn",closeBtn),function(){"use strict";function e(){return function(e){return e.charAt(0).toUpperCase()}}function t(){return function(e,t,n){return e===t?n:e}}angular.module("core.filters",[]).filter("charAt",e).filter("replaceWith",t)}(),function(){"use strict";function e(){function e(e){return 400==e.status?e:void 0}var t={responseError:e};return t}angular.module("core.interceptors",[]).factory("interceptor",e)}(),function(){"use strict";function e(e,t){function n(e){var n=t.path();return-1==n.indexOf("login")&&(e.headers.Authorization="Bearer "+sessionStorage.getItem("uid")),e}function o(n){return 403===n.status&&(sessionStorage.removeItem("uid"),t.url("/users/login")),e.reject(n)}var i={request:n,responseError:o};return i}angular.module("core.interceptors.http",[]).factory("tokenInterceptor",e),e.$inject=["$q","$location"]}(),function(){"use strict";function e(e,t,n){function o(){c.ticket=n.initializeTicket(),c.ticket_types=n.getTicketTypes(),c.requests=n.getRequestTypes(c.ticket_types)}function i(){n.createTicket(c.ticket).then(function(e){c.message={success:e.data.success,text:e.data.text,show:!0},1==e.data.success&&(c.ticket=n.initializeTicket(),c.type="",t.ticketSubForm.$setUntouched())})["catch"](function(e){c.message=n.showError()}),e()}function r(){c.ticket=n.initializeTicket()}function s(e){c.ticket.type_id=e.id}var c=this;c.submit=i,c.cancel=r,c.select=s,o()}angular.module("apps.help").controller("Help",e),e.$inject=["$anchorScroll","$scope","helpService"]}(),angular.module("apps.help").directive("hdAutoComplete",hdAutoComplete),hdAutoComplete.$inject=["$http","$rootScope"],function(){"use strict";function e(e){function t(t){return e.post("/api/validate",{email:t})}function n(){return{description:"",type_id:"",email:""}}function o(e){}function i(){return[{id:1,title:"software issue"},{id:2,title:"general computer issue"},{id:4,title:"internet issue"},{id:5,title:"printer issue"},{id:6,title:"phone issue (CUG or desk phone)"},{id:7,title:"unknown issue"},{id:8,title:"setting up a new employee"},{id:9,title:"making a change to the Ministry's website"},{id:10,title:"setting up/configuring a closed user group cell phone"},{id:11,title:"creating a custom application for our division/branch"},{id:12,title:"setting up a projector/public announcement system"},{id:13,title:"providing support at an event/meeting"},{id:14,title:"other"}]}function r(e){return e.slice(6)}function s(e){return{success:!1,message:"Please review the form for errors"}}function c(t){return""==t.description&&(t.description="no description provided by user"),e.post("/api/tickets",t)}function u(){return{error:!0,text:"We are unable to submit your issue at this time.",show:!0}}var a={initializeTicket:n,isEmpty:o,getTicketTypes:i,getRequestTypes:r,showMessage:s,createTicket:c,showError:u,validate:t};return a}angular.module("apps.help").service("helpService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(){n.apps=e}var n=this;t()}angular.module("core.dashboard").controller("Dashboard",e),e.$inject=["apps"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/apps").then(function(e){return e.data})}var n={getUserAppList:t};return n}angular.module("core.dashboard").service("dashSrv",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){function n(){t.deleteToken(),e.url("/users/login")}function o(){t.getUname().then(function(e){i.username=e.data})}var i=this;i.logout=n,o()}angular.module("core.nav").controller("Nav",e),e.$inject=["$location","login"]}(),function(){"use strict";function e(e,t){function n(){var n=t.q||"";"undefined"==typeof n&&""==n||e.get("/api/search?app=1&q="+n).then(function(e){o.results=e.data})["catch"](function(e){o.resuls=[]})}var o=this;n()}angular.module("core.search").controller("Search",e),e.$inject=["$http","$routeParams"]}(),function(){"use strict";function e(e,t,n){function o(){r.officers=n}function i(e){r.show=!r.show}var r=this;r.show=!1,r.showDoc=i,o()}angular.module("apps.tod").controller("ExpiryList",e),e.$inject=["todSrv","$location","officers"]}(),function(){"use strict";function e(e,t,n){function o(){u.officers=n}function i(t){e.getDocsByOfficerId(t.id).then(function(e){r(t.id),a.push(t.id),u.documents=e.data})}function r(e){0!=a.length?(s(),document.getElementById(e).classList.toggle("show")):document.getElementById(e).classList.toggle("show")}function s(){for(var e,t=0;t<a.length;t++)e=document.getElementById(a[t]),e.classList.contains("show")&&e.classList.remove("show")}function c(){"undefined"!=typeof u.query&&t.url("/dashboard/apps/search?q="+u.query)}var u=this;u.showDocs=i,u.showModal=!1,u.query="",u.search=c;var a=[];o(),window.onclick=function(e){e.target.matches(".src")||s()}}angular.module("apps.tod").controller("OfficerList",e),e.$inject=["todSrv","$location","officers"]}(),function(){"use strict";function e(e){function t(){return e.get("/api/employees").then(function(e){return e.data})}function n(t){return e.get("/api/employees/"+t+"/documents")}function o(){return!1}var i={getOfficers:t,getDocsByOfficerId:n,initModal:o};return i}angular.module("apps.tod").service("todSrv",e),e.$inject=["$http"]}();